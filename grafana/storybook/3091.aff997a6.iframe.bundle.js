"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[3091],{"../grafana-data/src/dataframe/processDataFrame.ts":function(He,be,B){B.d(be,{KR:function(){return Je},dF:function(){return te},HW:function(){return ee},ci:function(){return $e},LI:function(){return rt},ES:function(){return it},Kl:function(){return We}});var K=B("../../node_modules/lodash/lodash.js"),J=B("../grafana-data/src/datetime/moment_wrapper.ts"),_=B("../grafana-data/src/types/dataFrame.ts");const ae=(a,d=!1)=>{const F=a.values;switch(a.type){case _.PU.number:return Me(F,d);case _.PU.string:return Te(F,d);case _.PU.boolean:return Ne(F,d);case _.PU.time:return typeof a.values[0]=="number"?Pe(F,d):Ae(F,d);default:return Se(d)}},R=(a,d)=>{if(!a||!d)return le(a,d);if((0,K.isNumber)(a)&&(0,K.isNumber)(d))return ge(a,d);if((0,J.u8)(a)&&(0,J.u8)(d)){if((0,J.KQ)(a).isBefore(d))return-1;if((0,J.KQ)(d).isBefore(a))return 1}return 0},ge=(a,d)=>a-d,Fe=(a,d)=>!a||!d?le(a,d):a.localeCompare(d),Ce=(a,d)=>le(a,d),le=(a,d)=>!a&&d?1:a&&!d?-1:0,Pe=(a,d)=>{let F=d?-1:1;return(N,U)=>F*(a[N]-a[U])},Ae=(a,d)=>(F,N)=>{const U=a[F],V=a[N];return d?R(V,U):R(U,V)},Ne=(a,d)=>(F,N)=>{const U=a[F],V=a[N];return d?Ce(V,U):Ce(U,V)},Me=(a,d)=>(F,N)=>{const U=a[F],V=a[N];return d?ge(V,U):ge(U,V)},Te=(a,d)=>(F,N)=>{const U=a[F],V=a[N];return d?Fe(V,U):Fe(U,V)},Se=a=>(d,F)=>a?ge(F,d):ge(d,F);var Oe=Object.defineProperty,H=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,C=(a,d,F)=>d in a?Oe(a,d,{enumerable:!0,configurable:!0,writable:!0,value:F}):a[d]=F,I=(a,d)=>{for(var F in d||(d={}))O.call(d,F)&&C(a,F,d[F]);if(y)for(var F of y(d))T.call(d,F)&&C(a,F,d[F]);return a},$=(a,d)=>H(a,ue(d)),Y=(a,d)=>{var F={};for(var N in a)O.call(a,N)&&d.indexOf(N)<0&&(F[N]=a[N]);if(a!=null&&y)for(var N of y(a))d.indexOf(N)<0&&T.call(a,N)&&(F[N]=a[N]);return F};function L(a){const d=a.columns.map(F=>{const N=F,{text:U,type:V}=N,re=Y(N,["text","type"]),me=[];return{name:U?.length?U:F,config:re||{},values:me,type:V&&Object.values(FieldType).includes(V)?V:FieldType.other}});if(!isArray(a.rows))throw new Error(`Expected table rows to be array, got ${typeof a.rows}.`);for(const F of a.rows)for(let N=0;N<d.length;N++)d[N].values.push(F[N]);for(const F of d)if(F.type===FieldType.other){const N=te(F);N&&(F.type=N)}return{fields:d,refId:a.refId,meta:a.meta,name:a.name,length:a.rows.length}}function k(a){const d=[],F=[],N=a.datapoints||a.points;for(const V of N)F.push(V[0]),d.push(V[1]);const U=[{name:TIME_SERIES_TIME_FIELD_NAME,type:FieldType.time,config:{},values:d},{name:TIME_SERIES_VALUE_FIELD_NAME,type:FieldType.number,config:{unit:a.unit},values:F,labels:a.tags}];return a.title&&(U[1].config.displayNameFromDS=a.title),{name:a.target||a.name,refId:a.refId,meta:a.meta,fields:U,length:F.length}}function W(a){const d=[],F=[];for(let N=0;N<a.data.length;N++){const U=a.data[N];d.push(U[1]),F.push(U[0])}return{name:a.label,fields:[{name:a.label||TIME_SERIES_VALUE_FIELD_NAME,type:FieldType.number,config:{},values:d},{name:TIME_SERIES_TIME_FIELD_NAME,type:FieldType.time,config:{unit:"dateTimeAsIso"},values:F}],length:d.length}}function G(a){const d=[{name:a.target,type:FieldType.other,labels:a.tags,config:{unit:a.unit,filterable:a.filterable},values:[]}];for(const F of a.datapoints)d[0].values.push(F);return{name:a.target,refId:a.target,meta:{json:!0},fields:d,length:a.datapoints.length}}const Z=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function se(a,d){return a&&(a=a.toLowerCase(),a==="date"||a==="time")?FieldType.time:ee(d)}function ce(a){return a instanceof Date||isDateTime(a)?FieldType.time:isNumber(a)?FieldType.number:isString(a)?FieldType.string:isBoolean(a)?FieldType.boolean:FieldType.other}function ee(a){return a instanceof Date||(0,J.Ar)(a)?_.PU.time:(0,K.isNumber)(a)?_.PU.number:(0,K.isString)(a)?Z.test(a)?_.PU.number:a==="true"||a==="TRUE"||a==="True"||a==="false"||a==="FALSE"||a==="False"?_.PU.boolean:_.PU.string:(0,K.isBoolean)(a)?_.PU.boolean:_.PU.other}function te(a){if(a.name){const d=a.name.toLowerCase();if(d==="date"||d==="time")return _.PU.time}for(let d=0;d<a.values.length;d++){const F=a.values[d];if(F!=null)return ee(F)}}const fe=(a,d=!1)=>{for(const F of a.fields)if(!F.type||F.type===FieldType.other||d)return $(I({},a),{fields:a.fields.map(N=>N.type&&N.type!==FieldType.other&&!d?N:$(I({},N),{type:te(N)||FieldType.other}))});return a},ke=a=>!!(a&&a.hasOwnProperty("columns")),$e=a=>!!(a&&a.hasOwnProperty("fields")),rt=a=>!!($e(a)&&a.hasOwnProperty("value"));function nt(a){var d,F;if("fields"in a)return"length"in a&&((F=(d=a.fields[0])==null?void 0:d.values)!=null&&F.get)?a:ot(a);if(a.hasOwnProperty("type")&&a.type==="docs")return G(a);if(a.hasOwnProperty("datapoints")||a.hasOwnProperty("points"))return k(a);if(a.hasOwnProperty("data"))return a.hasOwnProperty("schema")?dataFrameFromJSON(a):W(a);if(a.hasOwnProperty("columns"))return L(a);if(Array.isArray(a))return arrayToDataFrame(a);throw console.warn("Can not convert",a),new Error("Unsupported data format")}const pt=a=>{const{fields:d}=a,F=a.length,N=[];if(d.length===2){const{timeField:U,timeIndex:V}=Je(a);if(U){const me=d[V===0?1:0],ne=d[V];for(let Be=0;Be<F;Be++)N.push([me.values[Be],ne.values[Be]]);return{alias:a.name,target:getFieldDisplayName(me,a),datapoints:N,unit:d[0].config?d[0].config.unit:void 0,refId:a.refId,meta:a.meta}}}for(let U=0;U<F;U++){const V=[];for(let re=0;re<d.length;re++)V.push(d[re].values[U]);N.push(V)}return a.meta&&a.meta.json?{alias:d[0].name||a.name,target:d[0].name||a.name,datapoints:d[0].values,filterable:d[0].config?d[0].config.filterable:void 0,type:"docs"}:{columns:d.map(U=>{const{name:V,config:re}=U;if(re){const me=Y(re,[]);return me.text=V,me}return{text:V}}),type:"table",refId:a.refId,meta:a.meta,rows:N}};function it(a,d,F=!1){const N=a.fields[d];if(!N)return a;const U=[];for(let re=0;re<a.length;re++)U.push(re);const V=ae(N,F);return U.sort(V),$(I({},a),{fields:a.fields.map(re=>{const me=$(I({},re),{values:re.values.map((Be,Ve)=>re.values[U[Ve]])}),{nanos:ne}=re;return ne!==void 0&&(me.nanos=ne.map((Be,Ve)=>ne[U[Ve]])),me})})}function mt(a){return $(I({},a),{fields:a.fields.map(d=>{const F=[...d.values];F.reverse();const N=$(I({},d),{values:F}),{nanos:U}=d;if(U!==void 0){const V=[...U];V.reverse(),N.nanos=V}return N})})}function ht(a,d){const F=[];for(const N of a.fields)F.push(N.values[d]);return F}function We(a){return lt(a)}function lt(a,d){return{fields:(d?a.fields.filter(d):a.fields).map(U=>{let V=U.values;return{name:U.name,type:U.type,config:U.config,values:V,labels:U.labels}}),refId:a.refId,meta:a.meta,name:a.name}}const Je=a=>{for(let d=0;d<a.fields.length;d++)if(a.fields[d].type===_.PU.time)return{timeField:a.fields[d],timeIndex:d};return{}};function Ye(a){const d=fe(nt(a));if(d.fields&&d.fields.length)for(const F of d.fields)F.state=null;return d}function at(a){return!a||!isArray(a)?[]:a.map(d=>Ye(d))}function st(a,d){const{series:F,annotations:N}=a;if(a.state===LoadingState.Loading&&F.length===0)return d||(d=a),$(I({},d),{state:LoadingState.Loading,request:a.request});const U=performance.now(),V=F.map(ne=>Ye(ne)),re=at(N),me=performance.now();return $(I({},a),{series:V,annotations:re,timings:{dataProcessingTime:me-U}})}function ot(a){let d=0;const F=a.fields.map((N,U)=>{var V;const re=N,{state:me}=re,ne=Y(re,["state"]);return ne.name||(ne.name=`Field ${U+1}`),ne.config||(ne.config={}),ne.values?ne.values.length>d&&(d=ne.values.length):ne.values=new Array(d),ne.type||(ne.type=(V=te(ne))!=null?V:FieldType.other),ne});return $(I({},a),{fields:F,length:d})}},"../grafana-data/src/datetime/timezones.ts":function(He,be,B){B.d(be,{HD:function(){return H},QZ:function(){return ue},U3:function(){return O},g$:function(){return Se},le:function(){return Oe}});var K=B("../../node_modules/lodash/lodash.js"),J=B.n(K),_=B("../../node_modules/moment-timezone/index.js"),ae=B.n(_),R=B("../grafana-data/src/datetime/common.ts"),ge=Object.defineProperty,Fe=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable,Ne=(L,k,W)=>k in L?ge(L,k,{enumerable:!0,configurable:!0,writable:!0,value:W}):L[k]=W,Me=(L,k)=>{for(var W in k||(k={}))Pe.call(k,W)&&Ne(L,W,k[W]);if(le)for(var W of le(k))Ae.call(k,W)&&Ne(L,W,k[W]);return L},Te=(L,k)=>Fe(L,Ce(k)),Se=(L=>(L.default="",L.localBrowserTime="browser",L.utc="utc",L))(Se||{});const Oe=L=>{switch((0,R.O)({timeZone:L})){case"browser":return"Local browser time";case"utc":return"UTC";default:return L}},H=L=>ae().tz.zone(L),ue=(L,k)=>{const W=T(L,k);return W||I(L,k)},y=(0,K.memoize)((L=!1)=>{const k=[];return L===!0?k.push("","browser","utc"):L&&k.push(...L),ae().tz.names().reduce((W,G)=>{const Z=Y[G];return!Array.isArray(Z)||Z.length===0||W.push(G),W},k)}),O=(0,K.memoize)((L=!1)=>{const W=y(L).reduce((G,Z)=>{var se,ce;const ee=Z.indexOf("/");if(ee===-1){const fe="";return G[fe]=(se=G[fe])!=null?se:[],G[fe].push(Z),G}const te=Z.slice(0,ee);return G[te]=(ce=G[te])!=null?ce:[],G[te].push(Z),G},{});return Object.keys(W).map(G=>({name:G,zones:W[G]}))}),T=(L,k)=>{var W,G,Z,se;switch(L){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:L,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const ce=(0,R.O)(),te=ce==="browser"||ce==="utc"?T(ce,k):I(ce,k);return Te(Me({countries:(W=Y[ce])!=null?W:[],abbreviation:"",offsetInMins:0},te),{ianaName:(G=te?.ianaName)!=null?G:"",name:"Default",zone:L})}case"browser":{const ce=ae().tz.guess(!0),ee=I(ce,k);return Te(Me({countries:(Z=Y[ce])!=null?Z:[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset()},ee),{name:"Browser Time",ianaName:(se=ee?.ianaName)!=null?se:"",zone:L})}default:return}},C=L=>/^(\+|\-).+/.test(L)?"":L,I=(L,k)=>{var W;const G=ae().tz.zone(L);if(G)return{name:L,ianaName:G.name,zone:L,countries:(W=Y[L])!=null?W:[],abbreviation:C(G.abbr(k)),offsetInMins:G.utcOffset(k)}},$={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},Y=(()=>ae().tz.countries().reduce((L,k)=>ae().tz.zonesForCountry(k).reduce((G,Z)=>{G[Z]||(G[Z]=[]);const se=$[k];return se&&G[Z].push({code:k,name:se}),G},L),{}))()},"../grafana-data/src/field/fieldState.ts":function(He,be,B){B.d(be,{Ct:function(){return Oe}});var K=B("../grafana-data/src/types/dataFrame.ts"),J=Object.defineProperty,_=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,ge=(O,T,C)=>T in O?J(O,T,{enumerable:!0,configurable:!0,writable:!0,value:C}):O[T]=C,Fe=(O,T)=>{for(var C in T||(T={}))ae.call(T,C)&&ge(O,C,T[C]);if(_)for(var C of _(T))R.call(T,C)&&ge(O,C,T[C]);return O};const Ce=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function le(O){const T={};return O.replace(Ce,(C,I,$,Y)=>(T[I]=Y,"")),T}function Pe(O){return O.reduce((T,C)=>{if(!C)throw new Error("Need parsed labels to find common labels.");return Object.keys(C).forEach(I=>{(T[I]===void 0||T[I]!==C[I])&&delete T[I]}),Object.keys(T).forEach(I=>{C[I]===void 0&&delete T[I]}),T},Fe({},O[0]))}function Ae(O,T){const C=Fe({},O);return Object.keys(T).forEach(I=>{delete C[I]}),C}function Ne(O,T){if(!O)return!0;for(const[C,I]of Object.entries(O))if(!T||T[C]!==I)return!1;return!0}function Me(O,T="",C){if(!O||Object.keys(O).length===0)return T;const $=Object.keys(O).sort().map(Y=>`${Y}="${O[Y]}"`).join(", ");return C?$:["{",$,"}"].join("")}function Te(O,T){if(O.name)return O.name;const C=[];for(const I of O.fields)if(I.type!==FieldType.time){if(C.length>1)break;C.push(Oe(I,O))}return C.length===1?C[0]:T===void 0&&O.fields.length>0?O.fields.filter(I=>I.type!==FieldType.time).map(I=>Oe(I,O)).join(", "):O.refId?`Series (${O.refId})`:`Series (${T})`}function Se(O){O.forEach(T=>{T.fields.forEach(C=>{Oe(C,T,O)})})}function Oe(O,T,C){var I,$;const Y=(I=O.state)==null?void 0:I.displayName,L=!!(C&&C.length>1);if(Y&&L===(($=O.state)==null?void 0:$.multipleFrames))return Y;const k=H(O,T,C);return O.state=O.state||{},O.state.displayName=k,O.state.multipleFrames=L,k}function H(O,T,C){var I,$,Y,L,k;const W=((I=O.config)==null?void 0:I.displayName)&&(($=O.config)==null?void 0:$.displayName.length),G=!!((L=(Y=T?.meta)==null?void 0:Y.timeCompare)!=null&&L.isTimeShiftQuery);let Z=W?O.config.displayName:O.name;if(W)return G?`${Z} (comparison)`:Z;if(T&&((k=O.config)!=null&&k.displayNameFromDS))return G?`${O.config.displayNameFromDS} (comparison)`:O.config.displayNameFromDS;if(O.type===K.PU.time&&!O.labels)return Z??K.LE;let se=[],ce=!1;if(C&&C.length>1){for(let fe=1;fe<C.length;fe++)if(C[fe].name!==C[fe-1].name){ce=!0;break}}let ee=!1,te=!1;if(ce&&T?.name&&(se.push(T.name),ee=!0),O.name&&O.name!==K.Bc&&se.push(O.name),O.labels&&T){let fe=y(C??[T]);if(fe)O.labels[fe]&&(se.push(O.labels[fe]),te=!0);else{let ke=Me(O.labels);ke&&(se.push(ke),te=!0)}}return T&&!ee&&!te&&O.name===K.Bc&&T.name&&T.name.length>0&&(se.push(T.name),ee=!0),se.length?Z=se.join(" "):O.name?Z=O.name:Z=K.Bc,Z===O.name&&(Z=ue(O,T)),G&&(Z=`${Z} (comparison)`),Z}function ue(O,T){let C=0,I=!1;if(T)for(let $=0;$<T.fields.length;$++){const Y=T.fields[$];if(O===Y){if(I=!0,C>0){C++;break}}else if(O.name===Y.name&&(C++,I))break}return C?`${O.name} ${C}`:O.name}function y(O){let T=null;for(let C=0;C<O.length;C++){const I=O[C];for(const $ of I.fields)if($.labels){for(const Y in $.labels)if(T===null)T=Y;else if(Y!==T)return null}}return T}},"../grafana-data/src/transformations/matchers.ts":function(He,be,B){B.d(be,{sJ:function(){return Ie},RE:function(){return ze},NS:function(){return Ze},Dq:function(){return Ge}});var K=B("../grafana-data/src/utils/Registry.ts"),J=B("../grafana-data/src/types/dataFrame.ts"),_=B("../grafana-data/src/transformations/matchers/ids.ts");const ae={id:_.Ct.byType,name:"Field Type",description:"match based on the field type",defaultOptions:J.PU.number,get:o=>(g,v,M)=>o===g.type,getOptionsDisplayText:o=>`Field type: ${o}`},R={id:_.Ct.byTypes,name:"Field Type",description:"match based on the field types",defaultOptions:new Set,get:o=>(g,v,M)=>o.has(g.type),getOptionsDisplayText:o=>`Field types: ${[...o].join(" | ")}`},ge={id:_.Ct.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>ae.get(J.PU.number),getOptionsDisplayText:()=>"Numeric Fields"},Fe={id:_.Ct.time,name:"Time Fields",description:"Fields with type time",get:()=>ae.get(J.PU.time),getOptionsDisplayText:()=>"Time Fields"};function Ce(){return[ae,R,ge,Fe]}var le=B("../grafana-schema/src/common/common.gen.ts"),Pe=B("../grafana-data/src/transformations/fieldReducer.ts");function Ae(o,g,v){switch((o==null||v==null)&&(o==null&&(o="null"),v==null&&(v="null"),(g===le.zT.GTE||g===le.zT.LTE)&&(g=le.zT.EQ)),g){case le.zT.EQ:return`${o}`==`${v}`;case le.zT.NEQ:return`${o}`!=`${v}`;case le.zT.GT:return o>v;case le.zT.GTE:return o>=v;case le.zT.LT:return o<v;case le.zT.LTE:return o<=v;default:return!1}}function Ne(o){return o===Pe.gy.allIsNull||o===Pe.gy.allIsZero}const Me={id:_.Ct.byValue,name:"By value (reducer)",description:"Reduce a field to a single value and test for inclusion",defaultOptions:{reducer:Pe.gy.allIsZero,op:le.zT.GTE,value:0},get:o=>{if(!o||!o.reducer)return()=>!1;let{reducer:g,op:v,value:M}=o;const X=Ne(g);return v||(v=le.zT.EQ),(oe,pe,Le)=>{const ve=(0,Pe.Nw)({field:oe,reducers:[g]})[g];return X?!!ve:Ae(ve,v,M)}},getOptionsDisplayText:o=>`By value (${o.reducer})`};var Te=B("../grafana-data/src/field/fieldState.ts"),Se=B("../grafana-data/src/text/string.ts"),Oe=(o=>(o.exclude="exclude",o.include="include",o))(Oe||{});const H={id:_.Ct.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:o=>{const v=y(new Set([o]));return(M,X,oe)=>o===M.name||o===(0,Te.Ct)(M,X,oe)||!!(v&&v(M,X,oe))},getOptionsDisplayText:o=>`Field name: ${o}`},ue={id:_.Ct.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:o=>{const{names:g,mode:v="include"}=o,M=new Set(g??[]),X=y(M),oe=(pe,Le,ve)=>M.has(pe.name)||M.has((0,Te.Ct)(pe,Le,ve))||!!(X&&X(pe,Le,ve));return v==="exclude"?(pe,Le,ve)=>!oe(pe,Le,ve):oe},getOptionsDisplayText:o=>{const{names:g,mode:v}=o,M=(g??[]).join(", ");return v==="exclude"?`All except: ${M}`:`All of: ${M}`}};function y(o){var g,v,M;let X;return((M=(v=(g=window?.grafanaBootData)==null?void 0:g.settings)==null?void 0:v.featureToggles)==null?void 0:M.dataplaneFrontendFallback)&&(o.has(J.Bc)?X=(pe,Le)=>{var ve;return!!pe.labels&&((ve=pe.labels)==null?void 0:ve.__name__)===pe.name}:(o.has("Time")||o.has("time"))&&(X=(pe,Le)=>{var ve;return((ve=Le.meta)==null?void 0:ve.typeVersion)==null&&pe.type===J.PU.time})),X}const O={id:_.Ct.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:o=>{const g=I(o);return(v,M,X)=>{const oe=(0,Te.Ct)(v,M,X);return!!g&&g.test(oe)}},getOptionsDisplayText:o=>`Field name by pattern: ${o}`},T={id:_.Ct.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:o=>(g,v,M)=>v.refId===o,getOptionsDisplayText:o=>`Math all fields returned by query with reference ID: ${o}`},C={id:_.Ct.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:o=>{var g;const v=O.get(o?.pattern||""),M=ue.get({mode:"include",names:(g=o?.names)!=null?g:[]});return(X,oe,pe)=>M(X,oe,pe)||v(X,oe,pe)},getOptionsDisplayText:o=>{var g,v,M;const X=(g=o?.pattern)!=null?g:"",oe=(M=(v=o?.names)==null?void 0:v.join(","))!=null?M:"";return`Field name by pattern: ${X} or names: ${oe}`}},I=o=>{if(o)try{return(0,Se.dO)(o)}catch(g){console.error(g);return}},$={id:_.jR.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:o=>{const g=(0,Se.dO)(o);return v=>g.test(v.name||"")},getOptionsDisplayText:o=>`Frame name: ${o}`};function Y(){return[H,O,ue,C,T]}function L(){return[$]}const k={id:_.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const g=o.map(v=>Ze(v));return(v,M,X)=>{for(const oe of g)if(oe(v,M,X))return!0;return!1}},getOptionsDisplayText:o=>{let g="";for(const v of o){g.length>0&&(g+=" OR ");const M=Ie.get(v.id);g+=M.getOptionsDisplayText?M.getOptionsDisplayText(v):M.name}return g}},W={id:_.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const g=o.map(v=>Ge(v));return v=>{for(const M of g)if(M(v))return!0;return!1}},getOptionsDisplayText:o=>{let g="";for(const v of o){g.length>0&&(g+=" OR ");const M=ze.get(v.id);g+=M.getOptionsDisplayText?M.getOptionsDisplayText(v):M.name}return g}},G={id:_.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const g=o.map(v=>Ze(v));return(v,M,X)=>{for(const oe of g)if(!oe(v,M,X))return!1;return!0}},getOptionsDisplayText:o=>{let g="";for(const v of o){g.length>0&&(g+=" AND ");const M=Ie.get(v.id);g+=M.getOptionsDisplayText?M.getOptionsDisplayText(v):M.name}return g}},Z={id:_.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:o=>{const g=o.map(v=>Ge(v));return v=>{for(const M of g)if(!M(v))return!1;return!0}},getOptionsDisplayText:o=>{let g="";for(const v of o){g.length>0&&(g+=" AND ");const M=ze.get(v.id);g+=M.getOptionsDisplayText?M.getOptionsDisplayText(v):M.name}return g}},se={id:_.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:o=>{const g=Ze(o);return(v,M,X)=>!g(v,M,X)},getOptionsDisplayText:o=>{const g=Ie.get(o.id);return"NOT "+(g.getOptionsDisplayText?g.getOptionsDisplayText(o.options):g.name)}},ce={id:_.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:o=>{const g=Ge(o);return v=>!g(v)},getOptionsDisplayText:o=>{const g=ze.get(o.id);return"NOT "+(g.getOptionsDisplayText?g.getOptionsDisplayText(o.options):g.name)}},ee=o=>!0,te=o=>!0,fe=o=>!1,ke=o=>o.type!==FieldType.time,$e=o=>!1,rt={id:_.cV.alwaysMatch,name:"All Fields",description:"Always Match",get:o=>ee,getOptionsDisplayText:o=>"Always"},nt={id:_.cV.alwaysMatch,name:"All Frames",description:"Always Match",get:o=>te,getOptionsDisplayText:o=>"Always"},pt={id:_.cV.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:o=>fe,getOptionsDisplayText:o=>"Never"},it={id:_.cV.neverMatch,name:"No Frames",description:"Never Match",get:o=>$e,getOptionsDisplayText:o=>"Never"};function mt(){return[k,G,se,rt,pt]}function ht(){return[W,Z,ce,nt,it]}const We={id:_.jR.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:o=>{const g=(0,Se.dO)(o);return v=>g.test(v.refId||"")},getOptionsDisplayText:o=>`RefID: ${o}`};function lt(){return[We]}const Je={id:_.Ct.first,name:"First Field",description:"The first field in the frame",get:o=>(g,v,M)=>g===v.fields[0],getOptionsDisplayText:()=>"First field"},Ye={id:_.Ct.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:o=>(g,v,M)=>g.type===J.PU.time&&g===v.fields.find(X=>X.type===J.PU.time),getOptionsDisplayText:()=>"First time field"};function at(){return[Je,Ye]}const st={id:_.Js.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:o=>(g,v)=>v.values[g]==o.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},ot={id:_.Js.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:o=>(g,v)=>v.values[g]!=o.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},a=()=>[st,ot],d={id:_.Js.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(o,g)=>g.values[o]==null,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},F={id:_.Js.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(o,g)=>g.values[o]!=null,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},N=()=>[d,F],U={id:_.Js.greater,name:"Is greater",description:"Match when field value is greater than option.",get:o=>(g,v)=>{const M=v.values[g];return isNaN(M)?!1:M>o.value},getOptionsDisplayText:o=>`Matches all rows where field value is greater than: ${o.value}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({value:0})},V={id:_.Js.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is greater than or equal to option.",get:o=>(g,v)=>{const M=v.values[g];return isNaN(M)?!1:M>=o.value},getOptionsDisplayText:o=>`Matches all rows where field value is greater than or equal to: ${o.value}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({value:0})},re={id:_.Js.lower,name:"Is lower",description:"Match when field value is lower than option.",get:o=>(g,v)=>{const M=v.values[g];return isNaN(M)?!1:M<o.value},getOptionsDisplayText:o=>`Matches all rows where field value is lower than: ${o.value}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({value:0})},me={id:_.Js.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:o=>(g,v)=>{const M=v.values[g];return isNaN(M)?!1:M<=o.value},getOptionsDisplayText:o=>`Matches all rows where field value is lower or equal than: ${o.value}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({value:0})},ne=()=>[U,V,re,me],Be={id:_.Js.between,name:"Is between",description:"Match when field value is between given option values.",get:o=>(g,v)=>{const M=v.values[g];return isNaN(M)?!1:M>o.from&&M<o.to},getOptionsDisplayText:o=>`Matches all rows where field value is between ${o.from} and ${o.to}.`,isApplicable:o=>o.type===J.PU.number,getDefaultOptions:()=>({from:0,to:100})},Ve=()=>[Be],Pt={id:_.Js.regex,name:"Regex",description:"Match when field value is matching regex.",get:o=>{const g=new RegExp(o.value);return(v,M)=>{const X=M.values[v];return g.test(X)}},getOptionsDisplayText:o=>`Matches all rows where field value is matching regex: ${o.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},Ut=()=>[Pt],Ie=new K.O(()=>[...mt(),...Ce(),...Y(),...at(),Me]),ze=new K.O(()=>[...ht(),...L(),...lt()]),xt=new K.O(()=>[...N(),...ne(),...a(),...Ve(),...Ut()]);function Ze(o){const g=Ie.get(o.id);if(!g)throw new Error("Unknown field matcher: "+o.id);return g.get(o.options)}function Ge(o){const g=ze.get(o.id);if(!g)throw new Error("Unknown frame matcher: "+o.id);return g.get(o.options)}function wt(o){const g=xt.get(o.id);if(!g)throw new Error("Unknown value matcher: "+o.id);return g.get(o.options)}},"../grafana-data/src/transformations/matchers/ids.ts":function(He,be,B){B.d(be,{Ct:function(){return J},Js:function(){return ae},cV:function(){return K},jR:function(){return _}});var K=(R=>(R.anyMatch="anyMatch",R.allMatch="allMatch",R.invertMatch="invertMatch",R.alwaysMatch="alwaysMatch",R.neverMatch="neverMatch",R))(K||{}),J=(R=>(R.numeric="numeric",R.time="time",R.first="first",R.firstTimeField="firstTimeField",R.byType="byType",R.byTypes="byTypes",R.byName="byName",R.byNames="byNames",R.byRegexp="byRegexp",R.byRegexpOrNames="byRegexpOrNames",R.byFrameRefID="byFrameRefID",R.byValue="byValue",R))(J||{}),_=(R=>(R.byName="byName",R.byRefId="byRefId",R.byIndex="byIndex",R))(_||{}),ae=(R=>(R.regex="regex",R.isNull="isNull",R.isNotNull="isNotNull",R.greater="greater",R.greaterOrEqual="greaterOrEqual",R.lower="lower",R.lowerOrEqual="lowerOrEqual",R.equal="equal",R.notEqual="notEqual",R.between="between",R))(ae||{})},"./src/components/Sparkline/Sparkline.tsx":function(He,be,B){B.d(be,{O:function(){return bt}});var K=B("../../node_modules/lodash/lodash.js"),J=B("../../node_modules/react/index.js"),_=Object.defineProperty,ae=Object.defineProperties,R=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,le=(t,e,r)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pe=(t,e)=>{for(var r in e||(e={}))Fe.call(e,r)&&le(t,r,e[r]);if(ge)for(var r of ge(e))Ce.call(e,r)&&le(t,r,e[r]);return t},Ae=(t,e)=>ae(t,R(e));function Ne(t){return Ae(Pe({},t),{fields:t.fields.map(e=>{var r;const n=+((r=e.config)==null?void 0:r.noValue);if(Number.isNaN(n))return e;{const i=e.values.slice();for(let l=0;l<i.length;l++)i[l]===null&&(i[l]=n);return Ae(Pe({},e),{values:i})}})})}function Me(t,e,r){var n,i;if(t===e)return!0;if(((n=t?.fields)==null?void 0:n.length)!==((i=e?.fields)==null?void 0:i.length)||t.name!==e.name)return!1;for(let l=0;l<t.fields.length;l++){const s=t.fields[l],u=e.fields[l];if(s.type!==u.type||s.name!==u.name)return!1;if(r)continue;if(s.labels&&u.labels&&!Oe(s.labels,u.labels))return!1;const c=s.config,m=u.config;let x=Object.keys(c),P=Object.keys(m);if(x.length!==P.length)return!1;for(const h of x){if(!(h in m))return!1;if(h!=="interval"&&!(0,K.isEqual)(c[h],m[h]))return!1}}return!0}function Te(t,e,r){if(t===e)return!0;if(t?.length!==e?.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}const Se=(t,e)=>t===e;function Oe(t,e,r=Se){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let l of n)if(!r(t[l],e[l]))return!1;return!0}var H=B("../grafana-data/src/types/dataFrame.ts"),ue=B("../grafana-data/src/field/fieldColor.ts"),y=B("../grafana-schema/src/common/common.gen.ts"),O=B("../../node_modules/uplot/dist/uPlot.esm.js"),T=B("../../node_modules/rxjs/dist/esm5/internal/operators/map.js"),C=B("../grafana-data/src/datetime/parser.ts"),I=B("../grafana-data/src/transformations/matchers.ts"),$=B("../grafana-data/src/transformations/matchers/ids.ts"),Y=(t=>(t.append="append",t.reduce="reduce",t.order="order",t.organize="organize",t.rename="rename",t.calculateField="calculateField",t.seriesToColumns="seriesToColumns",t.seriesToRows="seriesToRows",t.merge="merge",t.concatenate="concatenate",t.labelsToFields="labelsToFields",t.filterFields="filterFields",t.filterFieldsByName="filterFieldsByName",t.filterFrames="filterFrames",t.filterByRefId="filterByRefId",t.renameByRegex="renameByRegex",t.filterByValue="filterByValue",t.noop="noop",t.ensureColumns="ensureColumns",t.groupBy="groupBy",t.sortBy="sortBy",t.histogram="histogram",t.configFromData="configFromData",t.rowsToFields="rowsToFields",t.prepareTimeSeries="prepareTimeSeries",t.convertFieldType="convertFieldType",t.fieldLookup="fieldLookup",t.heatmap="heatmap",t.spatial="spatial",t.joinByField="joinByField",t.joinByLabels="joinByLabels",t.extractFields="extractFields",t.groupingToMatrix="groupingToMatrix",t.limit="limit",t.partitionByValues="partitionByValues",t.timeSeriesTable="timeSeriesTable",t.formatTime="formatTime",t.formatString="formatString",t.regression="regression",t.groupToNestedTable="groupToNestedTable",t))(Y||{}),L=Object.defineProperty,k=Object.defineProperties,W=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ce=(t,e,r)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ee=(t,e)=>{for(var r in e||(e={}))Z.call(e,r)&&ce(t,r,e[r]);if(G)for(var r of G(e))se.call(e,r)&&ce(t,r,e[r]);return t},te=(t,e)=>k(t,W(e));const fe={id:Y.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(t,e)=>r=>r.pipe((0,T.T)(n=>fe.transformer(t,e)(n))),transformer:t=>e=>{var r;return!Array.isArray(e)||e.length===0?e:(r=ke(t,e))!=null?r:[]}};function ke(t,e){if(!t.conversions.length)return e;const r=e.map(n=>ee({},n));for(const n of t.conversions){if(!n.targetField)continue;const i=I.sJ.get($.Ct.byName).get(n.targetField);for(const l of r)l.fields=l.fields.map(s=>i(s,l,r)?$e(s,n):s)}return r}function $e(t,e){switch(e.destinationType){case H.PU.time:return We(t,e.dateFormat);case H.PU.number:return pt(t);case H.PU.string:return mt(t,e.dateFormat,{timeZone:e.timezone},e.joinWith);case H.PU.boolean:return it(t);case H.PU.enum:return lt(t,e.enumConfig);case H.PU.other:return ht(t);default:return t}}const rt=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function nt(t,e){let r=e?{format:e}:void 0;const n=t.values.slice();let i=n.find(s=>s!=null),l=typeof i=="string"&&rt.test(i);for(let s=0;s<n.length;s++)if(n[s]){let u=l?Date.parse(n[s]):(0,C.b)(n[s],r).valueOf();n[s]=Number.isFinite(u)?u:null}else n[s]=null;return te(ee({},t),{type:H.PU.time,values:n})}function pt(t){const e=t.values.slice(),r=e.some(n=>typeof n=="string");for(let n=0;n<e.length;n++){let i=e[n];r&&i!=null&&typeof i=="string"&&(i=i.replace(/,/g,""));const l=+i;e[n]=Number.isFinite(l)?l:null}return te(ee({},t),{type:H.PU.number,values:e})}function it(t){const e=t.values.slice();for(let r=0;r<e.length;r++)e[r]=!!e[r];return te(ee({},t),{type:H.PU.boolean,values:e})}function mt(t,e,r,n){let i=t.values;switch(t.type){case H.PU.time:i=i.map(l=>(0,C.b)(l,r).format(e));break;case H.PU.other:i=i.map(l=>n?.length&&Array.isArray(l)?l.join(n):JSON.stringify(l));break;default:i=i.map(l=>`${l}`)}return te(ee({},t),{type:H.PU.string,values:i})}function ht(t){const e=t.values.slice();for(let r=0;r<e.length;r++)try{e[r]=JSON.parse(e[r])}catch{e[r]=null}return te(ee({},t),{type:H.PU.other,values:e})}function We(t,e){const r=typeof t.values[0]=="number";return t.type===H.PU.time&&r?t:r?te(ee({},t),{type:H.PU.time}):nt(t,e)}function lt(t,e){const r=ee({},e),n=t.values.slice(),i=new Map;if(r.text&&r.text.length>0)for(let l=0;l<r.text.length;l++)i.set(r.text[l],l);else return t;for(let l=0;l<n.length;l++){const s=n[l];n[l]=i.get(s)}return te(ee({},t),{config:te(ee({},t.config),{type:{enum:r}}),type:H.PU.enum,values:n})}var Je=Object.defineProperty,Ye=Object.defineProperties,at=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,d=(t,e,r)=>e in t?Je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,F=(t,e)=>{for(var r in e||(e={}))ot.call(e,r)&&d(t,r,e[r]);if(st)for(var r of st(e))a.call(e,r)&&d(t,r,e[r]);return t},N=(t,e)=>Ye(t,at(e));function U(t,e,r){var n}const V=(0,K.throttle)((...t)=>{console.log(...t)},500),re=t=>{let e=!1;return typeof window<"u"&&(e=window.localStorage.getItem("grafana.debug")==="true"),{logger:(r,n=!1,...i)=>{},enable:()=>e=!0,disable:()=>e=!1,isEnabled:()=>e}},me="__fixed";class ne{constructor(e){this.props=e}}function Be(t,e){var r,n,i,l,s,u,c;const m="na",x=`${t.min!==void 0?t.min:m}-${t.max!==void 0?t.max:m}`,P=`${((r=t.custom)==null?void 0:r.axisSoftMin)!==void 0?t.custom.axisSoftMin:m}-${((n=t.custom)==null?void 0:n.axisSoftMax)!==void 0?t.custom.axisSoftMax:m}`,h=`${((i=t.custom)==null?void 0:i.axisPlacement)!==void 0?(l=t.custom)==null?void 0:l.axisPlacement:y.vM.Auto}`,f=(s=t.unit)!=null?s:me,p=(u=t.custom)!=null&&u.scaleDistribution?Ve(t.custom.scaleDistribution):y.L4.Linear,E=(c=t.custom)!=null&&c.axisLabel?t.custom.axisLabel:m;return`${f}/${x}/${P}/${h}/${p}/${E}/${e}`}function Ve(t){return t.type===y.L4.Log?`${t.type}${t.log}`:t.type}const Pt=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function Ut(t){return t.replace(Pt,e=>`{${e}}`)}const Ie=(t,e,r)=>{let n=e%2?r[0]||r[2]:r[1]||r[3];return r[e]||!n?0:8},ze={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[Ie,Ie,Ie,Ie],series:[],hooks:{}};var xt=(t=>(t[t.Pos=1]="Pos",t[t.Neg=-1]="Neg",t))(xt||{});function Ze(t){let e=[],{series:r,dir:n}=t,i=r.length-1,l=r.slice().reverse();return l.forEach((s,u)=>{if(u!==i){let c=l[u+1];e.push({series:[s,c],dir:-1*n})}}),e}function Ge(t){let e=new Map;return t.fields.forEach(({config:r,values:n,type:i},l)=>{var s;if(l===0)return;let{custom:u}=r;if(u==null||(s=u.hideFrom)!=null&&s.viz)return;let{stacking:c}=u;if(c==null)return;let{mode:m,group:x}=c;if(m===y.gs.None)return;let P=u.transform,h=g(P,n),f=u.drawStyle,p=f===y.GR.Bars?u.barAlignment:f===y.GR.Line?u.lineInterpolation:null,E=`${h}|${m}|${x}|${Be(r,i)}|${f}|${p}`,b=e.get(E);b==null&&(b={series:[],dir:h},e.set(E,b)),b.series.push(l)}),[...e.values()]}function wt(t,e,r){let n=Array(t.fields.length),i=e.length,l=t.length,s=i>0?Array(l).fill(0):[],u=i>0?Array(l).fill(!1):[],c=Array.from({length:i},()=>s.slice()),m=Array.from({length:i},()=>u.slice());if(e.forEach((x,P)=>{let h=m[P];x.series.forEach(f=>{var p,E;let b=t.fields[f];if((E=(p=b.config.custom)==null?void 0:p.hideFrom)!=null&&E.viz)return;let w=b.values;for(let S=0;S<l;S++)w[S]!=null&&(h[S]=!0)})}),t.fields.forEach((x,P)=>{var h,f;let p=x.values;if(P===0){x.type===H.PU.time?n[P]=We(x).values:n[P]=p;return}let{custom:E}=x.config;if(!E||(h=E.hideFrom)!=null&&h.viz){n[P]=p;return}if(E.transform===y.NU.Constant){let w=p.findIndex(A=>A!=null),S=p[w];p=Array(p.length).fill(void 0),p[w]=S}else if(p=p.slice(),E.transform===y.NU.NegativeY)for(let w=0;w<p.length;w++)p[w]!=null&&(p[w]*=-1);let b=(f=E.stacking)==null?void 0:f.mode;if(!b||b===y.gs.None)n[P]=p;else{let w=e.findIndex(j=>j.series.indexOf(P)>-1),S=c[w],A=m[w],D=n[P]=Array(l);for(let j=0;j<l;j++){let z=p[j];z!=null?D[j]=S[j]+=z:D[j]=A[j]?S[j]:z}}}),r){let x=n.map((P,h)=>{let f=e.findIndex(p=>p.series.indexOf(h)>-1);return f!==-1?c[f]:P});r({totals:x})}return t.fields.forEach((x,P)=>{var h,f,p,E;if(P===0||(f=(h=x.config.custom)==null?void 0:h.hideFrom)!=null&&f.viz)return;if(((E=(p=x.config.custom)==null?void 0:p.stacking)==null?void 0:E.mode)===y.gs.Percent){let w=e.findIndex(j=>j.series.indexOf(P)>-1),S=c[w],A=e[w],D=n[P];for(let j=0;j<l;j++){let z=D[j];z!=null&&(D[j]=S[j]===0?0:A.dir*(z/S[j]))}}}),n}function o(t,e){let r,n=1,i=1,l=t.data[1][e],s=t.data[1][e];for(let u=1;u<t.data.length;u++){const m=t.data[u][e];m!=null&&(l==null?l=m:m>l&&(l=t.data[u][e],n=u),s==null?s=m:m<s&&(s=t.data[u][e],i=u))}return s==null&&l==null?r=void 0:s!=null&&l!=null?r=(t.valToPos(s,t.series[i].scale)+t.valToPos(l,t.series[n].scale))/2:r=t.valToPos(s||l,t.series[n||i].scale),r!==void 0&&r<0&&(r=t.bbox.height/devicePixelRatio),r}function g(t,e){const r=v(e);return t===y.NU.NegativeY?r?1:-1:r?-1:1}function v(t,e=100){const r=t.length;if(r===0)return!1;let n=0,i=r-1;for(;n<=i&&t[n]==null;)n++;for(;i>=n&&t[i]==null;)i--;let l=0,s=0;if(i>=n){const u=Math.max(1,Math.floor((i-n+1)/e));for(let c=n;c<=i;c+=u){const m=t[c];m!=null&&typeof m=="number"&&(m<0||Object.is(m,-0)?l++:m>0&&s++)}if(l>s)return!0}return!1}const M=re("uPlot"),X=M.logger;U("graphng",void 0,M);var oe=Object.defineProperty,pe=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,Dt=(t,e,r)=>e in t?oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fr=(t,e)=>{for(var r in e||(e={}))Le.call(e,r)&&Dt(t,r,e[r]);if(pe)for(var r of pe(e))ve.call(e,r)&&Dt(t,r,e[r]);return t};function Mr(t,e){return e.width===t.width&&e.height===t.height}function Tr(t,e){return e.data===t.data}function Sr(t,e){return e.config===t.config}class gt extends J.Component{constructor(e){super(e),this.plotContainer=(0,J.createRef)(),this.plotCanvasBBox=(0,J.createRef)(),this.state={plot:null}}reinitPlot(){var e;let{width:r,height:n,plotRef:i}=this.props;if((e=this.state.plot)==null||e.destroy(),r===0&&n===0)return;this.props.config.addHook("setSize",u=>{u.over});const l=Fr({width:Math.floor(this.props.width),height:Math.floor(this.props.height)},this.props.config.getConfig());X("UPlot",!1,"Reinitializing plot",l);const s=new O.A(l,this.props.data,this.plotContainer.current);i&&i(s),this.setState({plot:s})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){var e;(e=this.state.plot)==null||e.destroy()}componentDidUpdate(e){let{plot:r}=this.state;Mr(e,this.props)?Sr(e,this.props)?Tr(e,this.props)||r?.setData(this.props.data):this.reinitPlot():r?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return J.createElement("div",{style:{position:"relative"}},J.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}try{gt.displayName="UPlotChart",gt.__docgenInfo={description:"",displayName:"UPlotChart",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"AlignedData | [_: null, ...series: FacetValues[]]"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"UPlotConfigBuilder"}},plotRef:{defaultValue:null,description:"",name:"plotRef",required:!1,type:{name:"((u: uPlot) => void)"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/uPlot/Plot.tsx#UPlotChart"]={docgenInfo:gt.__docgenInfo,name:"UPlotChart",path:"src/components/uPlot/Plot.tsx#UPlotChart"})}catch{}var Cr=B("../grafana-data/src/types/time.ts"),Ar=B("../grafana-data/src/datetime/timezones.ts"),Rt=B("../grafana-data/src/valueFormats/valueFormats.ts"),Nr=Math.pow;function _r(t,e=0){if(Number.isInteger(t))return t;let r=Nr(10,e),n=t*r*(1+Number.EPSILON);return Math.round(n)/r}function Er(t){return((""+t).split(".")[1]||"").length}var Re=B("../grafana-data/src/datetime/formats.ts"),Br=B("../grafana-data/src/datetime/formatter.ts"),ut=B("./src/utils/measureText.ts"),jt=B("../grafana-data/src/field/displayProcessor.ts"),kt=B("../grafana-data/src/themes/createTheme.ts"),Vt=(t=>(t.TimeSeriesWide="timeseries-wide",t.TimeSeriesLong="timeseries-long",t.TimeSeriesMany="timeseries-many",t.TimeSeriesMulti="timeseries-multi",t.NumericWide="numeric-wide",t.NumericMulti="numeric-multi",t.NumericLong="numeric-long",t.LogLines="log-lines",t.DirectoryListing="directory-listing",t.HeatmapRows="heatmap-rows",t.HeatmapCells="heatmap-cells",t.Histogram="histogram",t))(Vt||{}),Ir=B("../../node_modules/fast_array_intersect/lib/index.js"),Ft=B("../grafana-data/src/dataframe/processDataFrame.ts"),vt=(t=>(t.outer="outer",t.inner="inner",t.outerTabular="outerTabular",t))(vt||{});const Lr={id:Y.joinByField,aliasIds:[Y.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(t,e)=>r=>r.pipe((0,T.T)(n=>Lr.transformer(t,e)(n))),transformer:(t,e)=>{let r;return n=>{if(n.length>1){t.byField&&!r&&(r=I.sJ.get($.Ct.byName).get(e.interpolate(t.byField)));const i=Gr({frames:n,joinBy:r,mode:t.mode});if(i)return[i]}return n}}};var Ur=Object.defineProperty,Dr=Object.defineProperties,Rr=Object.getOwnPropertyDescriptors,zt=Object.getOwnPropertySymbols,jr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,Gt=(t,e,r)=>e in t?Ur(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qe=(t,e)=>{for(var r in e||(e={}))jr.call(e,r)&&Gt(t,r,e[r]);if(zt)for(var r of zt(e))kr.call(e,r)&&Gt(t,r,e[r]);return t},ct=(t,e)=>Dr(t,Rr(e));function Vr(t){const{timeField:e}=(0,Ft.KR)(t[0]);if(e)return I.sJ.get($.Ct.firstTimeField).get({});let r=[];for(const n of t[0].fields)n.type===H.PU.number&&r.push(n.name);for(let n=1;n<t.length;n++){const i=[];for(const l of t[0].fields)l.type===H.PU.number&&i.push(l.name);r=r.filter(l=>!i.includes(l))}return I.sJ.get($.Ct.byName).get(r[0])}function Kt(t){var e;return(e=t.joinBy)!=null?e:Vr(t.frames)}function zr(t,e){if(e>=0){let r=t.fields[e];r.type!==H.PU.string&&!Jt(r.values)&&(t=(0,Ft.ES)(t,e))}return t}function Gr(t){var e,r,n,i,l;if(!((e=t.frames)!=null&&e.length))return;if(t.frames.length===1){let f=t.frames[0],p=f;const E=Kt(t);let b=p.fields.findIndex(w=>E(w,p,t.frames));if(t.keepOriginIndices&&(p=ct(Qe({},f),{fields:f.fields.map((w,S)=>{const A=Qe({},w),D={frameIndex:0,fieldIndex:S};return A.state?A.state.origin=D:A.state={origin:D},A})}),b>0)){const w=p.fields[b],S=p.fields.filter((A,D)=>D!==b);S.unshift(w),p.fields=S,b=0}if(b>=0&&(p=zr(p,b)),t.keep){let w=p.fields.filter((S,A)=>A===b||t.keep(S,p,t.frames));f!==p?p.fields=w:p=ct(Qe({},f),{fields:w})}return p}const s=[],u=[],c=[],m=[];let x=1;const P=Kt(t);for(let f=0;f<t.frames.length;f++){const p=t.frames[f];if(!p||!((r=p.fields)!=null&&r.length))continue;const E=[Mt];let b,w=[],S=[];for(let D=0;D<p.fields.length;D++){const j=p.fields[D];if(j.state=j.state||{},!b&&P(j,p,t.frames))b=j;else{if(t.keep&&!t.keep(j,p,t.frames))continue;let z=(n=j.config.custom)==null?void 0:n.spanNulls;E.push(z===!0?Mt:z===-1?Ht:$t);let q=(i=j.labels)!=null?i:{},de=j.name;p.name&&(j.name===H.Bc?de=p.name:q=ct(Qe({},q),{name:p.name})),w.push(ct(Qe({},j),{name:de,labels:q}))}t.keepOriginIndices&&(j.state.origin={frameIndex:f,fieldIndex:D})}if(!b)continue;c.length===0&&c.push(b),s.push(E);const A=[b.values];for(const D of w)A.push(D.values),c.push(D),(l=D.state)==null||delete l.displayName,S.push(x),x++;m.push(S),u.push(A)}let h=[];return t.mode===vt.outerTabular?h=Kr(u,m,c.length,s):h=Wt(u,s,t.mode),{length:h[0]?h[0].length:0,fields:c.map((f,p)=>ct(Qe({},f),{values:h[p]}))}}function Kr(t,e,r,n){let i={};for(let s=0;s<t.length;s++){let u=t[s],c=u[0];for(let m=0;m<t.length;m++){if(m===s)continue;let x=t[m],P=x[0];for(let h=0;h<c.length;h++){const f=c[h],p=r-1;let E=[f].concat(new Array(p)),b=0;for(let w=1;w<u.length;w++){const S=e[s][b];E[S]=u[w][h],b++}for(let w=0;w<P.length;w++)if(c[h]===P[w]){let S=0;for(let A=1;A<x.length;A++){const D=e[m][S];E[D]=x[A][w],S++}break}i[JSON.stringify(E)]=E}}}let l=[];for(let s=0;s<r;s++)l.push(new Array(0));for(let s in i){const u=i[s];for(let c=0;c<u.length;c++)l[c].push(u[c])}return l}const Mt=0,Ht=1,$t=2;function Hr(t,e,r){for(let n=0,i,l=-1;n<e.length;n++){let s=e[n];if(s>l){for(i=s-1;i>=0&&t[i]==null;)t[i--]=null;for(i=s+1;i<r&&t[i]==null;)t[l=i++]=null}}}function Wt(t,e,r=vt.outer){let n;if(r===vt.inner)n=new Set((0,Ir.A)(t.map(u=>u[0])));else{n=new Set;for(let u=0;u<t.length;u++){let m=t[u][0],x=m.length;for(let P=0;P<x;P++)n.add(m[P])}}let i=[Array.from(n).sort((u,c)=>u-c)],l=i[0].length,s=new Map;for(let u=0;u<l;u++)s.set(i[0][u],u);for(let u=0;u<t.length;u++){let c=t[u],m=c[0];for(let x=1;x<c.length;x++){let P=c[x],h=Array(l).fill(void 0),f=e?e[u][x]:Ht,p=[];for(let E=0;E<P.length;E++){let b=P[E],w=s.get(m[E]);b===null?f!==Mt&&(h[w]=b,f===$t&&p.push(w)):h[w]=b}Hr(h,p,l),i.push(h)}}return i}function Jt(t,e=50){const r=t.length;if(r<=1)return!0;let n=0,i=r-1;for(;n<=i&&t[n]==null;)n++;for(;i>=n&&t[i]==null;)i--;if(i<=n)return!0;const l=Math.max(1,Math.floor((i-n+1)/e));for(let s=t[n],u=n+l;u<=i;u+=l){const c=t[u];if(c!=null){if(c<=s)return!1;s=c}}return!0}const Yt=()=>{var t,e,r;return(r=(e=(t=window?.grafanaBootData)==null?void 0:t.settings)==null?void 0:e.featureToggles)==null?void 0:r.transformationsVariableSupport};var $r=Object.defineProperty,Wr=Object.defineProperties,Jr=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,Yr=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,Qt=(t,e,r)=>e in t?$r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xe=(t,e)=>{for(var r in e||(e={}))Yr.call(e,r)&&Qt(t,r,e[r]);if(Zt)for(var r of Zt(e))Zr.call(e,r)&&Qt(t,r,e[r]);return t},we=(t,e)=>Wr(t,Jr(e));const Xt=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],Qr=30,Xr=[],qr=(t,e)=>t-e,di={bucketCount:{name:"Bucket count",description:"approx bucket count"},bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},en={id:Y.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(t,e)=>r=>r.pipe((0,T.T)(n=>en.transformer(t,e)(n))),transformer:(t,e)=>r=>{if(!Array.isArray(r)||r.length===0)return r;let n,i;t.bucketSize&&(Yt()&&(t.bucketSize=e.interpolate(t.bucketSize.toString())),typeof t.bucketSize=="string"?n=parseFloat(t.bucketSize):n=t.bucketSize,isNaN(n)&&(n=void 0)),t.bucketOffset&&(Yt()&&(t.bucketOffset=e.interpolate(t.bucketOffset.toString())),typeof t.bucketOffset=="string"?i=parseFloat(t.bucketOffset):i=t.bucketOffset,isNaN(i)&&(i=void 0));const l={bucketSize:n,bucketOffset:i,combine:t.combine},s=nn(r,l);return s==null?[]:[an(s)]}},Tt="xMin";function tn(t){return t===Tt||t==="BucketMin"}const St="xMax";function rn(t){return t===St||t==="BucketMax"}function fi(t){var e,r;if(((e=t.meta)==null?void 0:e.type)===DataFrameType.HeatmapCells){let s=t.fields.find(f=>f.name==="yMin"),u=t.fields.find(f=>f.name==="yMax"),c=t.fields.find(f=>f.name==="count"),m=[...new Set(u.values)].sort((f,p)=>f-p),x=[...new Set(s.values)].sort((f,p)=>f-p),P=new Map;m.forEach(f=>P.set(f,0));for(let f=0;f<u.values.length;f++){let p=u.values[f];P.set(p,P.get(p)+c.values[f])}return{xMin:we(xe({},s),{name:"xMin",values:x}),xMax:we(xe({},u),{name:"xMax",values:m}),counts:[we(xe({},c),{values:[...P.values()]})]}}else if(((r=t.meta)==null?void 0:r.type)===DataFrameType.HeatmapRows){let s=[],u=[],c=[],m="0";return t.fields.forEach(P=>{if(P.type===FieldType.number){let h=P.values.reduce((f,p)=>f+p,0);c.push(h),s.push(m),u.push(m=P.name)}}),c.push(0),s.push(m),u.push(m),{xMin:we(xe({},t.fields[1]),{name:"xMin",type:FieldType.string,values:s}),xMax:we(xe({},t.fields[1]),{name:"xMax",type:FieldType.string,values:u}),counts:[we(xe({},t.fields[1]),{name:"count",type:FieldType.number,values:c})]}}let n,i;const l=[];for(const s of t.fields)tn(s.name)?n=s:rn(s.name)?i=s:s.type===FieldType.number&&l.push(s);if(!i&&n&&n.values.length>1){let s=n.values,u=roundDecimals(s[1]-s[0],6);i=we(xe({},n),{name:St,values:s.map(c=>c+u)})}if(!n&&i&&i?.values.length>1){let s=i.values,u=roundDecimals(s[1]-s[0],6);n=we(xe({},i),{name:Tt,values:s.map(c=>c-u)})}if(n&&i&&l.length)return{xMin:n,xMax:i,counts:l}}function nn(t,e){var r,n,i;let l=e?.bucketSize,s=(r=e?.bucketCount)!=null?r:Qr,u=(n=e?.bucketOffset)!=null?n:0;if(!l||l<0){let b=[];for(const z of t)for(const q of z.fields)q.type===H.PU.number&&(b=b.concat(q.values));b=b.filter(z=>z!=null),b.sort((z,q)=>z-q);let w=1/0;if(b.length===1)w=1;else for(let z=1;z<b.length;z++){let q=b[z]-b[z-1];q!==0&&(w=Math.min(w,q))}let S=b[0];const j=(b[b.length-1]-S)/s;for(let z=0;z<Xt.length;z++){let q=Xt[z];if(j<q&&q>=w){l=q;break}}}const c=b=>Ct(b-u,l)+u;let m=((i=(""+l).match(/\.\d+$/))!=null?i:["."])[0].length-1,x=[],P=[],h;for(const b of t)for(const w of b.fields)if(w.type===H.PU.number){let S=ln(w.values,c,Xr,qr);x.push(S),P.push(we(xe({},w),{config:we(xe({},w.config),{unit:w.config.unit==="short"?"short":void 0})})),!h&&w.config.unit&&(h=w.config)}if(!P.length)return null;let f=Wt(x);for(let b=1;b<f.length;b++){let w=f[b];for(let S=0;S<w.length;S++)w[S]==null&&(w[S]=0)}const p={name:Tt,values:f[0],type:H.PU.number,state:void 0,config:m===0?h??{}:we(xe({},h),{decimals:m})},E=we(xe({},p),{name:St,values:f[0].map(b=>b+l)});if(e?.combine){const b=new Array(f[0].length).fill(0);for(let w=1;w<f.length;w++)for(let S=0;S<b.length;S++)b[S]+=f[w][S];P=[we(xe({},P[0]),{name:"count",values:b,type:H.PU.number,state:void 0})]}else P.forEach((b,w)=>{b.values=f[w+1]});return{xMin:p,xMax:E,counts:P}}function pi(t,e){return Math.round(t/e)*e}function qt(t,e){return Math.ceil(t/e)*e}function Ct(t,e){return Math.floor(t/e)*e}function ln(t,e,r,n){let i=new Map;for(let c=0;c<t.length;c++){let m=t[c];m!=null&&(m=e(m));let x=i.get(m);x?x.count++:i.set(m,{value:m,count:1})}r&&r.forEach(c=>i.delete(c));let l=[...i.values()];n&&l.sort((c,m)=>n(c.value,m.value));let s=Array(l.length),u=Array(l.length);for(let c=0;c<l.length;c++)s[c]=l[c].value,u[c]=l[c].count;return[s,u]}function an(t,e){if(!t.xMin.display){const r=(0,jt.J)({field:t.xMin,theme:e??(0,kt.a)()});t.xMin.display=r,t.xMax.display=r}return t.counts[0].display=(0,jt.J)({field:t.counts[0],theme:e??(0,kt.a)()}),{length:t.xMin.values.length,meta:{type:Vt.Histogram},fields:[t.xMin,t.xMax,...t.counts]}}var sn=Object.defineProperty,er=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,un=Object.prototype.propertyIsEnumerable,Xe=Math.pow,tr=(t,e,r)=>e in t?sn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cn=(t,e)=>{for(var r in e||(e={}))on.call(e,r)&&tr(t,r,e[r]);if(er)for(var r of er(e))un.call(e,r)&&tr(t,r,e[r]);return t};class dn extends ne{merge(e){this.props.min=At("min",this.props.min,e.min),this.props.max=At("max",this.props.max,e.max)}getConfig(){var e,r;let{isTime:n,scaleKey:i,min:l,max:s,softMin:u,softMax:c,range:m,direction:x,orientation:P,centeredZero:h,decimals:f}=this.props;const p=this.props.distribution,E=n?{}:{distr:p===y.L4.Symlog?4:p===y.L4.Log?3:p===y.L4.Ordinal?2:1,log:p===y.L4.Log||p===y.L4.Symlog?(e=this.props.log)!=null?e:2:void 0,asinh:p===y.L4.Symlog?(r=this.props.linearThreshold)!=null?r:1:void 0};if(p===y.L4.Log){let de=this.props.log,ie=de===2?Math.log2:Math.log10;l!=null&&(l<=0?l=null:l=Xe(de,Math.floor(ie(l)))),s!=null&&(s<=0?s=null:s=Xe(de,Math.ceil(ie(s)))),u!=null&&(u<=0?u=null:u=Xe(de,Math.floor(ie(u)))),c!=null&&(c<=0?c=null:c=Xe(de,Math.ceil(ie(c))))}let b=u==null?3:1,w=c==null?3:1;const S={min:{pad:.1,hard:l??-1/0,soft:u||0,mode:b},max:{pad:.1,hard:s??1/0,soft:c||0,mode:w}};let A=u==null&&l!=null,D=c==null&&s!=null,j=A&&D;const z=(de,ie,ye,Ee)=>{var Ue;const he=de.scales[Ee];let Q=[ie,ye];if(Ee==="x"&&!n&&p===y.L4.Linear||!j&&ie==null&&ye==null)return Q;let je=(Ue=he.log)!=null?Ue:10;if(he.distr===1||he.distr===2||he.distr===4){if(h){let et=Math.abs(ie),Lt=Math.abs(ye),tt=Math.max(et,Lt);tt===0&&(tt=80),ie=-tt,ye=tt}he.distr===4?Q=O.A.rangeAsinh(ie,ye,je,!0):Q=O.A.rangeNum(A?l:ie,D?s:ye,S)}else he.distr===3&&(Q=O.A.rangeLog(l??ie,s??ye,je,!0));if(f===0)if(he.distr===1||he.distr===2)Q[0]=Ct(Q[0],1),Q[1]=qt(Q[1],1);else if(he.distr===3){let et=he.log===2?Math.log2:Math.log10;if(Q[0]<=1)Q[0]=1;else{let tt=Math.floor(et(Q[0]));Q[0]=Xe(je,tt)}let Lt=Math.ceil(et(Q[1]));Q[1]=Xe(je,Lt),Q[0]===Q[1]&&(Q[1]*=je)}else he.distr===4&&(Q[0]=Ct(Q[0],1),Q[1]=qt(Q[1],1));return(he.distr===1||he.distr===4)&&(A&&(Q[0]=l),D&&(Q[1]=s)),Q[0]>=Q[1]&&(Q[0]=he.distr===3?1:0,Q[1]=100),Q};let q=!n&&!j;return(0,Rt.j9)(i)&&(q=!1,m=[0,1]),{[i]:cn({time:n,auto:q,range:m??z,dir:x,ori:P},E)}}}function At(t,e,r){const n=e!=null,i=r!=null;return n?i?t==="min"?e<r?e:r:e>r?e:r:e:r}var fn=Object.defineProperty,rr=Object.getOwnPropertySymbols,pn=Object.prototype.hasOwnProperty,mn=Object.prototype.propertyIsEnumerable,nr=(t,e,r)=>e in t?fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hn=(t,e)=>{for(var r in e||(e={}))pn.call(e,r)&&nr(t,r,e[r]);if(rr)for(var r of rr(e))mn.call(e,r)&&nr(t,r,e[r]);return t};const dt=12,ir=8;class gn extends ne{merge(e){this.props.size=At("max",this.props.size,e.size),this.props.label||(this.props.label=e.label),this.props.placement===y.vM.Auto&&(this.props.placement=e.placement)}calculateSpace(e,r,n,i,l){const s=e.axes[r],u=e.scales[s.scale];if(s.side!==2||!u)return 30;const c=40;if(u.time){const m=l/c,x=(i-n)/m,P=lr(e,[n],r,c,x);return(0,ut.kD)(P[0],dt).width+18}return c}calculateAxisSize(e,r,n){const i=e.axes[n];let l=i.ticks.size;if(i.side===2)l+=i.gap+dt;else if(r?.length){let s=r.reduce((c,m)=>Math.max(c,(0,ut.kD)(m,dt).width),0);const u=Math.min(e.width*.4,s);l+=i.gap+i.labelGap+u}return Math.ceil(l)}getConfig(){let{scaleKey:e,label:r,show:n=!0,placement:i=y.vM.Auto,grid:l={show:!0},ticks:s,space:u,filter:c,gap:m=5,formatValue:x,splits:P,values:h,incrs:f,isTime:p,timeZone:E,theme:b,tickLabelRotation:w,size:S,color:A,border:D,decimals:j,distr:z=y.L4.Linear}=this.props;const q=`${dt}px ${b.typography.fontFamily}`,de=b.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,Rt.j9)(e)&&(P=[0,1]),j===0&&z===y.L4.Linear&&(c=(ye,Ee)=>Ee.map(Ue=>Number.isInteger(Ue)?Ue:null));let ie={scale:e,show:n,stroke:A??b.colors.text.primary,side:vn(i),font:q,size:S??((ye,Ee,Ue)=>this.calculateAxisSize(ye,Ee,Ue)),rotate:w,gap:m,labelGap:0,grid:{show:l.show,stroke:de,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:D?.show?A??b.colors.text.primary:de,width:1/devicePixelRatio,size:4},s),splits:P,values:h,space:u??((ye,Ee,Ue,he,Q)=>this.calculateSpace(ye,Ee,Ue,he,Q)),filter:c,incrs:f};return D?.show&&(ie.border=hn({stroke:A??b.colors.text.primary,width:1/devicePixelRatio},D)),r!=null&&r.length>0&&(ie.label=r,ie.labelSize=dt+ir,ie.labelFont=q,ie.labelGap=ir),h?ie.values=h:p?ie.values=lr:x&&(ie.values=(ye,Ee,Ue,he,Q)=>{let je=Er(_r(Q,6));return Ee.map(et=>x(et,je>0?je:void 0))}),ie.timeZone=E,ie}}const _e={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function lr(t,e,r,n,i){var l,s;const u=t.axes[r].timeZone,c=t.scales.x,m=((l=c?.max)!=null?l:0)-((s=c?.min)!=null?s:0),x=Math.round(_e.year/_e.day)*_e.day,P=Math.round(i/_e.day)*_e.day;let h=Re.WC.interval.year;return i<_e.second?h=Re.WC.interval.millisecond:i<=_e.minute?h=Re.WC.interval.second:m<=_e.day?h=Re.WC.interval.minute:i<=_e.day?h=Re.WC.interval.hour:m<_e.year?h=Re.WC.interval.day:P===x?h=Re.WC.interval.year:i<=_e.year&&(h=Re.WC.interval.month),e.map(f=>f==null?"":(0,Br.LE)(f,{format:h,timeZone:u}))}function vn(t){switch(t){case y.vM.Top:return 0;case y.vM.Right:return 1;case y.vM.Bottom:return 2;case y.vM.Left:}return 3}var qe=B("../grafana-data/src/types/fieldColor.ts"),Ke=B("../grafana-data/src/themes/colorManipulator.ts"),ft=B("../../node_modules/tinycolor2/esm/tinycolor.js"),ar=B("../grafana-data/src/types/thresholds.ts");function sr(t,e,r){let n=0,i=0,l=0,s=0;return t===3?(i=e.top,s=e.top+e.height):t===2?(n=e.left+e.width,l=e.left):t===1?(i=e.top+e.height,s=e.top):t===0&&(n=e.left,l=e.left+e.width),r.createLinearGradient(n,i,l,s)}function yn(t,e){return(r,n)=>{const i=(0,ut.Yc)(),l=sr(r.scales.x.ori===y.Lt.Horizontal?3:2,r.bbox,i);return l.addColorStop(0,Ke.X4(t,e)),l.addColorStop(1,Ke.X4(t,0)),l}}function or(t,e,r){return(n,i)=>{const l=(0,ut.Yc)(),s=sr(n.scales.x.ori===y.Lt.Horizontal?3:2,n.bbox,l),u=(0,ft.A)(t).spin(-25).darken(5),c=(0,ft.A)(t).saturate(20).spin(20).brighten(10);return r.isDark?(s.addColorStop(0,c.lighten(10).setAlpha(e).toString()),s.addColorStop(1,u.darken(10).setAlpha(e).toString())):(s.addColorStop(0,c.lighten(10).setAlpha(e).toString()),s.addColorStop(1,u.setAlpha(e).toString())),s}}var On=(t=>(t[t.Right=0]="Right",t[t.Up=1]="Up",t[t.Left=2]="Left",t[t.Down=3]="Down",t))(On||{});function yt(t,e,r,n=!1){let i=t.scales[e],l=null,s=null;for(let A=0;A<r.length;A++){let D=r[A][0];if((D<=i.min||l==null)&&(l=A),s=A,D>=i.max)break}if(l===s)return r[l][1];let u=r[l][0],c=r[s][0];u===-1/0&&(u=i.min),c===1/0&&(c=i.max);let m=Math.round(t.valToPos(u,e,!0)),x=Math.round(t.valToPos(c,e,!0)),P=m-x;if(P===0)return r[s][1];let h,f,p,E;t.scales.x.ori===y.Lt.Horizontal?(h=p=0,f=m,E=x):(f=E=0,h=m,p=x);let w=(0,ut.Yc)().createLinearGradient(h,f,p,E),S;for(let A=l;A<=s;A++){let D=r[A],j=A===l?m:A===s?x:Math.round(t.valToPos(D[0],e,!0)),z=(m-j)/P;n&&A>l&&w.addColorStop(z,S),w.addColorStop(z,S=D[1])}return w}function bn(t,e){let r=t.scales[e],n=1/0,i=-1/0;return t.series.forEach((l,s)=>{if(l.show&&l.scale===e)if(l.min==null){let u=t.data[s];for(let c=0;c<u.length;c++)u[c]!=null&&(n=Math.min(n,u[c]),i=Math.max(i,u[c]))}else n=Math.min(n,l.min),i=Math.max(i,l.max)}),i===n&&(n=r.min,i=r.max),[n,i]}function Nt(t,e,r,n,i,l){var s,u,c,m;let x=(s=r??i)!=null?s:null,P=(u=n??l)!=null?u:null;if(x==null||P==null){let[h,f]=bn(t,e);x=(c=x??h)!=null?c:0,P=(m=P??f)!=null?m:100}return[x,P]}function Pn(t){return t==="transparent"||t[0]==="#"&&t.slice(-2)==="00"}function ur(t,e,r,n,i,l,s,u){if(!r)throw Error("Missing colorMode required for color scheme gradients");if(!n)throw Error("Missing thresholds required for color scheme gradients");return(c,m)=>{let x=c.series[m].scale,P="";if(r.id===qe.Y.Thresholds)if(n.mode===ar.O.Absolute){const h=n.steps.map(f=>[f.value,Pn(f.color)?"#0000":Ke.X4(e.visualization.getColorByName(f.color),t)]);P=yt(c,x,h,!0)}else{const[h,f]=Nt(c,x,i,l,s,u),p=f-h,E=n.steps.map(b=>[h+p*(b.value/100),Ke.X4(e.visualization.getColorByName(b.color),t)]);P=yt(c,x,E,!0)}else if(r.getColors){const h=r.getColors(e),[f,p]=Nt(c,x,i,l,s,u),E=p-f,b=h.map((w,S)=>[f+E*(S/(h.length-1)),Ke.X4(e.visualization.getColorByName(w),t)]);P=yt(c,x,b,!1)}return P}}var xn=Object.defineProperty,cr=Object.getOwnPropertySymbols,wn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,dr=(t,e,r)=>e in t?xn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fr=(t,e)=>{for(var r in e||(e={}))wn.call(e,r)&&dr(t,r,e[r]);if(cr)for(var r of cr(e))Fn.call(e,r)&&dr(t,r,e[r]);return t};class Mn extends ne{getConfig(){var e;const{facets:r,drawStyle:n,pathBuilder:i,pointsBuilder:l,pointsFilter:s,lineInterpolation:u,lineWidth:c,lineStyle:m,barAlignment:x,barWidthFactor:P,barMaxWidth:h,showPoints:f,pointSize:p,scaleKey:E,pxAlign:b,spanNulls:w,show:S=!0}=this.props;let A={},D=this.getLineColor();A.stroke=D,A.width=c,m&&m.fill!=="solid"&&(m.fill==="dot"&&(A.cap="round"),A.dash=(e=m.dash)!=null?e:[10,10]),i!=null?A.paths=i:n===y.GR.Points?A.paths=()=>null:n!=null&&(A.paths=(q,de,ie,ye)=>Tn(n,u,x,P,h)(q,de,ie,ye));const j=typeof D=="string"?D:(q,de)=>q.series[de]._stroke,z={points:{stroke:j,fill:j,size:!p||p<c?void 0:p,filter:s}};return l!=null?z.points.show=l:n===y.GR.Points?z.points.show=!0:f===y.yL.Auto?n===y.GR.Bars&&(z.points.show=!1):f===y.yL.Never?z.points.show=!1:f===y.yL.Always&&(z.points.show=!0),fr(fr({scale:E,facets:r,spanGaps:typeof w=="number"?!1:w,value:()=>"",pxAlign:b,show:S,fill:this.getFill()},A),z)}getLineColor(){const{lineColor:e,gradientMode:r,colorMode:n,thresholds:i,theme:l,hardMin:s,hardMax:u,softMin:c,softMax:m,dynamicSeriesColor:x}=this.props;return r===y.on.None&&x?(P,h)=>{var f,p;return(p=(f=x(h))!=null?f:e)!=null?p:qe.F}:r===y.on.Scheme&&n?.id!==qe.Y.Fixed?ur(1,l,n,i,s,u,c,m):r===y.on.Hue?or(e??qe.F,1,l):e??qe.F}getFill(){const{lineColor:e,fillColor:r,gradientMode:n,fillOpacity:i,colorMode:l,thresholds:s,theme:u,hardMin:c,hardMax:m,softMin:x,softMax:P,dynamicSeriesColor:h}=this.props;if(r)return r;const f=n??y.on.None,p=(i??0)/100;if(f===y.on.None&&h&&p>0)return(E,b)=>{let w=E.series[b]._stroke;return Ke.X4(w??"",p)};switch(f){case y.on.Opacity:return yn(r??e,p);case y.on.Hue:return or(r??e,p,u);case y.on.Scheme:if(l?.id!==qe.Y.Fixed)return ur(p,u,l,s,c,m,x,P);default:if(p>0)return Ke.X4(e??"",p)}}}let De;function Tn(t,e,r=y.Nj.Center,n=.6,i=200){const l=O.A.paths;if(De||(De={linear:l.linear(),smooth:l.spline(),stepBefore:l.stepped({align:-1}),stepAfter:l.stepped({align:1})}),t===y.GR.Bars){let s=`bars|${r}|${n}|${i}`;return De[s]||(De[s]=l.bars({size:[n,i],align:r})),De[s]}else if(t===y.GR.Line){if(e===y.dx.StepBefore)return De.stepBefore;if(e===y.dx.StepAfter)return De.stepAfter;if(e===y.dx.Smooth)return De.smooth}return De.linear}var Sn=Object.defineProperty,Cn=Object.defineProperties,An=Object.getOwnPropertyDescriptors,pr=Object.getOwnPropertySymbols,Nn=Object.prototype.hasOwnProperty,_n=Object.prototype.propertyIsEnumerable,mr=(t,e,r)=>e in t?Sn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,En=(t,e)=>{for(var r in e||(e={}))Nn.call(e,r)&&mr(t,r,e[r]);if(pr)for(var r of pr(e))_n.call(e,r)&&mr(t,r,e[r]);return t},Bn=(t,e)=>Cn(t,An(e));function In(t){const e=t.config.mode===y.Ly.Dashed||t.config.mode===y.Ly.DashedAndArea?[10,10]:null;function r(h,f,p,E){let b=h.ctx,w=0;for(let S=0;S<p.length;S++)if(p[S].color==="transparent"){w=S;break}b.lineWidth=2,e&&b.setLineDash(e);for(let S=1;S<p.length;S++){const A=p[S];let D;w>=S&&S>0?D=(0,ft.A)(E.visualization.getColorByName(p[S-1].color)):D=(0,ft.A)(E.visualization.getColorByName(A.color)),D.getAlpha()===1&&D.setAlpha(.7);let j=Math.round(h.bbox.left),z=Math.round(h.valToPos(A.value,f,!0)),q=Math.round(h.bbox.left+h.bbox.width),de=Math.round(h.valToPos(A.value,f,!0));b.beginPath(),b.moveTo(j,z),b.lineTo(q,de),b.strokeStyle=D.toString(),b.stroke()}}function n(h,f,p,E){let b=h.ctx,w=yt(h,f,p.map(S=>{let A=(0,ft.A)(E.visualization.getColorByName(S.color));return A.getAlpha()===1&&A.setAlpha(.15),[S.value,A.toString()]}),!0);b.fillStyle=w,b.fillRect(h.bbox.left,h.bbox.top,h.bbox.width,h.bbox.height)}const{scaleKey:i,thresholds:l,theme:s,config:u,hardMin:c,hardMax:m,softMin:x,softMax:P}=t;return h=>{const f=h.ctx,{min:p,max:E}=h.scales.x,{min:b,max:w}=h.scales[i];if(p==null||E==null||b==null||w==null)return;let{steps:S,mode:A}=l;if(A===ar.O.Percentage){let[D,j]=Nt(h,i,c,m,x,P),z=j-D;S=S.map(q=>Bn(En({},q),{value:D+z*(q.value/100)}))}switch(f.save(),u.mode){case y.Ly.Line:case y.Ly.Dashed:r(h,i,S,s);break;case y.Ly.Area:n(h,i,S,s);break;case y.Ly.LineAndArea:case y.Ly.DashedAndArea:n(h,i,S,s),r(h,i,S,s)}f.restore()}}var Ln=Object.defineProperty,Un=Object.defineProperties,Dn=Object.getOwnPropertyDescriptors,hr=Object.getOwnPropertySymbols,Rn=Object.prototype.hasOwnProperty,jn=Object.prototype.propertyIsEnumerable,gr=(t,e,r)=>e in t?Ln(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_t=(t,e)=>{for(var r in e||(e={}))Rn.call(e,r)&&gr(t,r,e[r]);if(hr)for(var r of hr(e))jn.call(e,r)&&gr(t,r,e[r]);return t},kn=(t,e)=>Un(t,Dn(e));const Vn={drag:{setScale:!1},points:{size:(t,e)=>t.series[e].points.size*2,width:(t,e,r)=>r/4},focus:{prox:30}};class zn{constructor(e=Cr.lE){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=n=>{let i=new Date(n);return this.tz?O.A.tzDate(i,this.tz):i};var r;this.tz=(r=(0,Ar.QZ)(e,Date.now()))==null?void 0:r.ianaName}addHook(e,r){X("UPlotConfigBuilder",!1,"addHook",e),this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(r)}addThresholds(e){this.thresholds[e.scaleKey]||(this.thresholds[e.scaleKey]=e,this.addHook("drawClear",In(e)))}addAxis(e){var r,n,i;e.placement=(r=e.placement)!=null?r:y.vM.Auto,e.grid=(n=e.grid)!=null?n:{};let l=e.scaleKey;if(l==="x"&&(l+=(i=e.timeZone)!=null?i:""),this.axes[l]){this.axes[l].merge(e);return}e.placement===y.vM.Auto&&(e.placement=this.hasLeftAxis?y.vM.Right:y.vM.Left),e.placement===y.vM.Left&&(this.hasLeftAxis=!0),e.placement===y.vM.Hidden&&(e.grid.show=!1,e.size=0),this.axes[l]=new gn(e)}getAxisPlacement(e){var r;const n=this.axes[e];return(r=n?.props.placement)!=null?r:y.vM.Left}setCursor(e){this.cursor=(0,K.merge)({},this.cursor,e)}setMode(e){this.mode=e}setSelect(e){this.select=e}addSeries(e){this.series.push(new Mn(e))}getSeries(){return this.series}addScale(e){const r=this.scales.find(n=>n.props.scaleKey===e.scaleKey);if(r){r.merge(e);return}this.scales.push(new dn(e))}addBand(e){this.bands.push(e)}setStackingGroups(e){this.stackingGroups=e}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(e){this.tooltipInterpolator=e}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(e){this.prepData=r=>(this.frames=r,e(r,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(e){this.padding=e}getConfig(){if(this.cachedConfig)return this.cachedConfig;const e=kn(_t({},ze),{mode:this.mode,series:[this.mode===2?null:{value:()=>""}]});e.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(n=>n.getConfig()),e.series=[...e.series,...this.series.map(n=>n.getConfig())],e.scales=this.scales.reduce((n,i)=>_t(_t({},n),i.getConfig()),{}),e.hooks=this.hooks,e.select=this.select;const r=(n="")=>(i,l)=>{let s=i.series[l].points._stroke;if(typeof s!="string"){let u=this.frames[0].fields[l];s=u.display(u.values[i.cursor.idxs[l]]).color}return s+n};return e.cursor=(0,K.merge)({},Vn,{points:{stroke:r("80"),fill:r()}},this.cursor),e.tzDate=this.tzDate,Array.isArray(this.padding)&&(e.padding=this.padding),this.stackingGroups.forEach(n=>{Ze(n).forEach(i=>{this.addBand(i)})}),this.bands.length&&(e.bands=this.bands),this.cachedConfig=e,e}ensureNonOverlappingAxes(e){const r=e.find(l=>l.props.scaleKey==="x"),n=e.filter(l=>{var s;return((s=l.props.grid)==null?void 0:s.show)===void 0}),i=n.findIndex(l=>l.props.placement===y.vM.Left||l.props.placement===y.vM.Right||l.props.placement===y.vM.Bottom&&l!==r);for(let l=0;l<n.length;l++)n[l]===r||l===i?n[l].props.grid.show=!0:n[l].props.grid.show=!1;return e}}var Gn=Object.defineProperty,Kn=Object.defineProperties,Hn=Object.getOwnPropertyDescriptors,vr=Object.getOwnPropertySymbols,$n=Object.prototype.hasOwnProperty,Wn=Object.prototype.propertyIsEnumerable,yr=(t,e,r)=>e in t?Gn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Et=(t,e)=>{for(var r in e||(e={}))$n.call(e,r)&&yr(t,r,e[r]);if(vr)for(var r of vr(e))Wn.call(e,r)&&yr(t,r,e[r]);return t},Bt=(t,e)=>Kn(t,Hn(e));const Jn={threshold:(t,e,r)=>t+r,midpoint:(t,e,r)=>(t+e)/2,plusone:(t,e,r)=>t+1};function Yn(t,e){return t.fields.find(r=>e!=null?r.name===e:r.type===H.PU.time)}function Zn(t){if(t.frame.length===0)return t.frame;let e=!0,{frame:r,refFieldName:n,refFieldPseudoMax:i,refFieldPseudoMin:l,insertMode:s}=t;s||(s=Jn.threshold);const u=Yn(r,n);if(u==null)return r;u.state=Bt(Et({},u.state),{nullThresholdApplied:!0});const c=r.fields.map(x=>{var P;return((P=x.config.custom)==null?void 0:P.insertNulls)||u.config.interval||null}),m=new Set(c);if(m.delete(null),m.size===0)return r;if(m.size===1){const x=m.values().next().value;if(x<=0)return r;const P=u.values,h=r.fields.map(p=>p.values),f=Qn(P,h,x,l,i,s,e);return f===h?r:Bt(Et({},r),{length:f[0].length,fields:r.fields.map((p,E)=>Bt(Et({},p),{values:f[E]}))})}return r}function Qn(t,e,r,n=null,i=null,l,s){const u=t.length,c=[];if(n!=null&&n<t[0]){let h=Math.ceil((t[0]-n)/r),f=t[0]-h*r;for(;f<t[0];)c.push(l(f-r,f,r)),f+=r}c.push(t[0]);let m=t[0];for(let h=1;h<u;h++){const f=t[h];for(;f-m>r&&(c.push(l(m,f,r)),m+=r,!!s););c.push(f),m=f}if(i!=null&&i>m)for(;m+r<i;)c.push(l(m,i,r)),m+=r;const x=c.length;if(x===u)return e;const P=[];for(let h of e){let f;if(h!==t){f=Array(x);for(let p=0,E=0;p<x;p++)f[p]=t[E]===c[p]?h[E++]:null}else f=c;P.push(f)}return P}var Xn=Object.defineProperty,qn=Object.defineProperties,ei=Object.getOwnPropertyDescriptors,Or=Object.getOwnPropertySymbols,ti=Object.prototype.hasOwnProperty,ri=Object.prototype.propertyIsEnumerable,br=(t,e,r)=>e in t?Xn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,It=(t,e)=>{for(var r in e||(e={}))ti.call(e,r)&&br(t,r,e[r]);if(Or)for(var r of Or(e))ri.call(e,r)&&br(t,r,e[r]);return t},ni=(t,e)=>qn(t,ei(e));function Pr(t,e){var r,n,i;const l=t.y.values.length,s=It(It({},t.y.config),e),u=(r=t.x)!=null?r:{name:"",values:[...Array(l).keys()],type:H.PU.number,config:{}};let c={refId:"sparkline",fields:[u,ni(It({},t.y),{config:s})],length:l};return Jt(u.values)||(c=(0,Ft.ES)(c,0)),Zn({frame:c,refFieldPseudoMin:(n=t.timeRange)==null?void 0:n.from.valueOf(),refFieldPseudoMax:(i=t.timeRange)==null?void 0:i.to.valueOf()})}var ii=Object.defineProperty,li=Object.defineProperties,ai=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertySymbols,si=Object.prototype.hasOwnProperty,oi=Object.prototype.propertyIsEnumerable,wr=(t,e,r)=>e in t?ii(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ot=(t,e)=>{for(var r in e||(e={}))si.call(e,r)&&wr(t,r,e[r]);if(xr)for(var r of xr(e))oi.call(e,r)&&wr(t,r,e[r]);return t},ui=(t,e)=>li(t,ai(e));const ci={drawStyle:y.GR.Line,showPoints:y.yL.Auto,axisPlacement:y.vM.Hidden,pointSize:2};class bt extends J.PureComponent{constructor(e){super(e);const r=Pr(e.sparkline,e.config);this.state={data:wt(r,Ge(r)),alignedDataFrame:r,configBuilder:this.prepareConfig(r)}}static getDerivedStateFromProps(e,r){const n=Pr(e.sparkline,e.config),i=Ne(n);return i?ui(Ot({},r),{data:wt(i,Ge(i)),alignedDataFrame:i}):Ot({},r)}componentDidUpdate(e,r){const{alignedDataFrame:n}=this.state;if(!n)return;let i=!1;e.sparkline!==this.props.sparkline?i=!Me(this.state.alignedDataFrame,r.alignedDataFrame):i=!(0,K.isEqual)(e.config,this.props.config),i&&this.setState({configBuilder:this.prepareConfig(n)})}getYRange(e){var r,n,i,l;let{min:s,max:u}=(r=this.state.alignedDataFrame.fields[1].state)==null?void 0:r.range;const c=+((n=this.state.alignedDataFrame.fields[1].config)==null?void 0:n.noValue);return Number.isNaN(c)||(s=Math.min(s,+c),u=Math.max(u,+c)),s===u?(s===0?u=100:(s=0,u*=2),[s,u]):[Math.max(s,(i=e.config.min)!=null?i:-1/0),Math.min(u,(l=e.config.max)!=null?l:1/0)]}prepareConfig(e){var r;const{theme:n}=this.props,i=new zn;i.setCursor({show:!1,x:!1,y:!1});const l=e.fields[0];i.addScale({scaleKey:"x",orientation:y.Lt.Horizontal,direction:y.ON.Right,isTime:!1,range:()=>{const{sparkline:s}=this.props;if(s.x){if(s.timeRange&&s.x.type===H.PU.time)return[s.timeRange.from.valueOf(),s.timeRange.to.valueOf()];const u=s.x.values;return[u[0],u[u.length-1]]}return[0,s.y.values.length-1]}}),i.addAxis({scaleKey:"x",theme:n,placement:y.vM.Hidden});for(let s=0;s<e.fields.length;s++){const u=e.fields[s],c=u.config,m=Ot(Ot({},ci),c.custom);if(u===l||u.type!==H.PU.number)continue;const x=c.unit||"__fixed";i.addScale({scaleKey:x,orientation:y.Lt.Vertical,direction:y.ON.Up,range:()=>this.getYRange(u)}),i.addAxis({scaleKey:x,theme:n,placement:y.vM.Hidden});const P=(0,ue.Qi)(u),h=P.getCalculator(u,n)(0,0),f=m.drawStyle===y.GR.Points?y.yL.Always:m.showPoints;i.addSeries({pxAlign:!1,scaleKey:x,theme:n,colorMode:P,thresholds:c.thresholds,drawStyle:m.drawStyle,lineColor:(r=m.lineColor)!=null?r:h,lineWidth:m.lineWidth,lineInterpolation:m.lineInterpolation,showPoints:f,pointSize:m.pointSize,fillOpacity:m.fillOpacity,fillColor:m.fillColor,lineStyle:m.lineStyle,gradientMode:m.gradientMode})}return i}render(){const{data:e,configBuilder:r}=this.state,{width:n,height:i}=this.props;return J.createElement(gt,{data:e,config:r,width:n,height:i})}}try{bt.displayName="Sparkline",bt.__docgenInfo={description:"",displayName:"Sparkline",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},config:{defaultValue:null,description:"",name:"config",required:!1,type:{name:"FieldConfig<GraphFieldConfig>"}},sparkline:{defaultValue:null,description:"",name:"sparkline",required:!0,type:{name:"FieldSparkline"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"GrafanaTheme2"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Sparkline/Sparkline.tsx#Sparkline"]={docgenInfo:bt.__docgenInfo,name:"Sparkline",path:"src/components/Sparkline/Sparkline.tsx#Sparkline"})}catch{}},"./src/utils/colors.ts":function(He,be,B){B.d(be,{mZ:function(){return Oe}});var K=B("../../node_modules/lodash/lodash.js"),J=B.n(K),_=B("../../node_modules/tinycolor2/esm/tinycolor.js");const ae=4,R="rgba(0, 211, 255, 1)",ge="rgba(11, 237, 50, 1)",Fe="rgba(237, 46, 24, 1)",Ce="rgba(150, 150, 150, 1)",le="rgba(247, 149, 32, 1)",Pe=.09,Ae=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function Ne(ue){const y=(0,K.map)(ue,Me),O=(0,K.sortBy)(y,["h"]),T=(0,K.chunk)(O,ae),C=(0,K.map)(T,$=>(0,K.sortBy)($,"l")),I=(0,K.flattenDeep)((0,K.zip)(...C));return(0,K.map)(I,Te)}function Me(ue){return(0,_.A)(ue).toHsl()}function Te(ue){return(0,_.A)(ue).toHexString()}function Se(ue){return tinycolor(ue).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function Oe(ue,y){const O=(0,_.A)(ue),T=O.getBrightness();return O.getAlpha()<.3?y?"rgb(247, 248, 250)":"rgb(32, 34, 38)":T>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let H=Ne(Ae)}}]);
